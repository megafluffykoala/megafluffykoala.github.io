<link href="../whirlwind.css" rel="stylesheet">

<whirlheader>
    <p>megafluffykoala</p>
    <p>Market Microstructure Theory </p>
    <p>2025</p>
</whirlheader>

# Markets and Market Making

<details>
<summary>Introduction to Market Microstructure</summary>

  - Market microstructure is the study of how assets are exchanged under specific trading rules.
  - Traditional economics often abstracts from the mechanics of trading, while market microstructure focuses on how trading mechanisms impact price formation.
  - Trading mechanisms can involve intermediaries like stock specialists or order clerks, centralized locations like exchanges or futures pits, or electronic platforms where buyers and sellers indicate interest.
  - Prices emerge and buyers and sellers engage in trade within these mechanisms.

</details>

<details>
<summary>Motivation for Studying Market Microstructure</summary>

  - The 1987 market crash highlighted the fragility of markets, driving interest in the role of trading mechanisms.
  - The rapid proliferation of new markets and exchanges also fueled interest in market microstructure research.
  - Underlying the study is the fundamental curiosity about how prices are formed in the economy, which has historically been a "black box" in economics.
  - Understanding price formation is crucial to understanding how economies allocate goods and services.

</details>

<details>
<summary>Focus of Market Microstructure Research</summary>

  - Research aims to exploit the structure of trading mechanisms to model how price-setting rules evolve in markets.
  - This allows for the examination of how different trading protocols influence price formation and why prices exhibit specific time-series properties.
  - Set in financial markets, market microstructure helps to understand asset returns and the process of market efficiency.

</details>

<details>
<summary>Application and Importance of Market Microstructure Research</summary>

  - Market microstructure research has immediate applications in market regulation and the design of new trading mechanisms.
  - A significant benefit is the insights it provides for empirical research, especially with the increased availability of detailed and real-time market data.
  - Despite this availability, understanding economic behavior over short time intervals remains limited, requiring a better formulation of optimizing economic agent behavior.

</details>

<details>
<summary>Purpose and Scope of the Book</summary>

  - The book aims to provide a formulation for understanding the state of market microstructure theory.
  - It does not serve as an encyclopedic reference, but analyzes the general paradigms explaining market behavior.
  - The field of market microstructure may seem disjointed, but many models share a focus on the information implicit in market data and the learning process that translates this into prices.
  - The book seeks to offer a unified framework for understanding the connections in existing theoretical research.

</details>

<details>
<summary>Evolution of Market Microstructure Theory</summary>

  - Early market microstructure research focused on the stochastic nature of supply and demand.
  - Later work shifted to the information-aggregation properties of prices and markets.
  - These two approaches have not fully merged, leaving gaps in understanding some important aspects of microstructure.
  - Despite this, these paradigms have been applied to a wide array of issues in the field.

</details>

<details>
<summary>Unresolved Questions in Market Microstructure</summary>

  - Numerous policy issues related to market structure and stability have emerged due to the evolution of financial markets.
  - Theoretical models have not yet provided definitive results regarding the empirical properties and behaviors security prices should exhibit.
  - These issues are expected to dominate research agendas in the coming years.
  - Before these issues can be fully addressed, the more fundamental question of how markets work must be clarified.

</details>

<details>
<summary>Focus of the Chapter</summary>

  - This chapter explores the basic question of how prices are set in markets.
  - It critiques the traditional view of price formation, which overlooks the role of explicit trading mechanisms.
  - The chapter provides a brief overview of the types of markets used for trading financial assets.
  - This serves as an introduction to the analysis of different theoretical approaches in subsequent chapters on price evolution in markets.

</details>

## Prices and Markets 

<details>
<summary>The Determination of Prices</summary>

  - In traditional economics, the price of a good is determined by the intersection of supply and demand curves.
  - The central question of market microstructure is how equilibrium is attained and how the desires of suppliers and demanders are coordinated to produce a price.
  - Economics often lacks an explanation of the price formation process, which is the core focus of market microstructure research.

</details>

<details>
<summary>Traditional Approaches to Price Formation</summary>

  - One traditional approach to price formation is to argue that the process of achieving equilibrium is irrelevant, focusing solely on the equilibrium price.
  - The rational expectations literature exemplifies this view, where traders use prices to form expectations and determine equilibrium demands without considering out-of-equilibrium behavior.
  - This approach assumes the trading mechanism does not affect the equilibrium price, which is problematic in markets with asymmetric information.

</details>

<details>
<summary>The Walrasian Auctioneer Model</summary>

  - The Walrasian auctioneer model is a model where an auctioneer aggregates traders' demands and supplies to find a market-clearing price.
  - The auctioneer suggests a potential price, and traders adjust their orders until equilibrium is reached, where the quantity supplied equals the quantity demanded.
  - The Walrasian model assumes costless trading, no frictions, and no incentive issues, with traders adjusting to the equilibrium price without actual trading until this balance is found.

</details>

<details>
<summary>Limitations of the Walrasian Model</summary>

  - While the Walrasian auctioneer model is simple, it may not capture how prices are actually formed, as real markets may have market participants whose roles differ significantly from the passive auctioneer.
  - Market participants may have additional behaviors and incentives that influence price formation, raising the question of whether the auctioneer model is realistic.

</details>

<details>
<summary>Demsetz's Contribution to Market Microstructure</summary>

  - Demsetz (1968) was one of the first economists to directly analyze the role of transaction costs and the time dimension of supply and demand in determining market prices.
  - Demsetz identified the concept of the "price of immediacy," where costs arise from the time factor in trading, and how the imbalance between immediate buyers and sellers affects market prices.
  - His work showed that a lack of immediate equilibrium could be overcome by offering a higher price to induce immediate sellers or a lower price to induce immediate buyers.

</details>

<details>
<summary>The Price of Immediacy and Two Prices</summary>

  - Demsetz argued that at any given time, there are two prices in the market: one for traders who want to buy/sell immediately, and another for those willing to wait.
  - This concept challenges the Walrasian framework, which assumes a single equilibrium price, by acknowledging the role of time and immediacy in price determination.
  - The price for immediate trades is subject to the "spread," which is influenced by the number of traders and the volume of trade in the market.

</details>

<details>
<summary>Market Structure and Its Impact on Prices</summary>

  - The specific structure of the market influences the trading price, as the spread (the cost of immediacy) is impacted by factors such as volume and the number of traders.
  - Demsetz empirically investigated the relationship between the size of the spread and the volume of trade on the NYSE, demonstrating that market structure and organization are crucial for understanding price formation.

</details>

<details>
<summary>Limitations of Demsetz's Model</summary>

  - Although Demsetz's model advanced the understanding of market prices by incorporating the time dimension, it is limited by its simplicity and assumptions.
  - The model does not account for the complexity of real-world market mechanisms, which are more dynamic and involve multiple periods and more complex interactions.
  - The model's focus on a single trading mechanism also overlooks the diversity of trading mechanisms in actual markets.

</details>

<details>
<summary>The Role of Trading Mechanisms</summary>

  - If the trading mechanism plays a crucial role in price formation, then understanding how these mechanisms work becomes essential.
  - The structure of the market affects not just the price but also trader behavior and decision-making, meaning the mechanism is an integral part of how prices are set.
  - This complexity introduces interactions between the market mechanism and trader behavior, which were previously ignored in simpler models.

</details>

<details>
<summary>Market Microstructure and Its Complexity</summary>

  - Market microstructure research remains grounded in real market design, though there is still a need to understand the specific features and rules of various markets.
  - The study of market microstructure must consider a wide variety of market-clearing mechanisms, as new markets are constantly emerging.
  - Despite this diversity, many markets share common features, which are explored in subsequent chapters of the book.

</details>

## The Nature of Markets 

<details>
<summary>Market and Market Making</summary>

- The process of exchange happens in various ways, such as direct contact between buyers and sellers, gathering at a central location, or using computer screens.
- Intermediaries play a crucial role in arranging trades, and market prices evolve according to the rules of the trading mechanism.
- The London gold fixing serves as an example of how market prices are formed through a sequential auction process, where buyers and sellers indicate net positions until a price is agreed upon.
- While this process establishes a price, the actual quantity of the asset traded at the equilibrium price is unknown due to the lack of physical trading.
- Compared to more liquid markets like foreign exchange, the gold fixing process can be seen as inefficient or outdated, but both processes result in market-clearing prices.
  
</details>

<details>
<summary>Market Microstructure Theory</summary>

- A trading mechanism is seen as a "game" where players meet in a venue and operate according to rules.
- Market participants can include customers, brokers, dealers, and market makers:
  - Customers: Submit orders to buy or sell.
  - Brokers: Act as intermediaries by transmitting orders without trading for their own account.
  - Dealers: Trade for their own account, often acting as brokers as well.
  - Market Makers: Quote buy/sell prices and take positions to facilitate trading. They can sometimes act as dealers too.
  
- There are additional intermediaries like block traders and scalpers who combine roles or hold temporary positions.

</details>

<details>
<summary>Trading Venues and Rules</summary>

- The location of trading is a secondary concern compared to the rules that govern the trading mechanism.
- Traditionally, exchanges serve as centralized locations for trading, such as the New York Stock Exchange (NYSE), Chicago for futures, and various exchanges for equities globally.
- Newer markets may operate through computerized networks like Instinet, POSIT, and Globex, demonstrating that location does not determine the market's function.
- The rules of a trading mechanism include aspects such as what can be traded, who can trade, order submission, visibility, and how prices are set. These rules define how the market operates.

</details>

<details>
<summary>The New York Stock Exchange (NYSE)</summary>

- The NYSE facilitates the trading of approximately 2,089 listed firms, with an average daily volume of 202 million shares (1992).
- At the core of NYSE operations are stock specialists, who are assigned stocks to manage, quote prices, and ensure market liquidity.
- Each listed stock is assigned a specialist, with some specialists handling multiple stocks.
- Specialists must handle all market orders and public limit orders, maintaining a book of limit orders.
- The NYSE uses both a call auction (for opening prices) and a continuous auction (for ongoing trading).
  
</details>

<details>
<summary>Call Auction and Continuous Auction on the NYSE</summary>

- The call auction is used for the opening of the market, where orders accumulate before a market-clearing price is set by the specialist.
- The specialist may take a position or rely on limit orders to balance order imbalances at the opening.
- If there is a large imbalance of orders, the opening may be delayed, and a provisional opening price may be announced.
- Once the opening price is set, trading continues with a continuous auction where specialists quote bid and ask prices.
- Limit orders may exist on the book, influencing the specialist's quoted prices, but the specialist cannot preempt standing orders.

</details>

<details>
<summary>Order Flow and Trading Procedures</summary>

- Orders arrive via floor traders or electronically through systems like SuperDot and the Intermarket Trading System (ITS), which links multiple U.S. markets.
- The specialist is expected to maintain price stability, moving prices in minimal increments.
- Price changes are limited by rules that promote stability; in 1992, 96.4% of transactions saw price changes of 1/8 or less.
- Circuit breakers (introduced after the 1987 market crash) halt trading when the market experiences extreme movements.
  - For example, trading halts for one hour if the Dow Jones declines 250 points and for two hours with a 400-point drop.
- Rule 80A restricts program trading when the Dow Jones declines 50 points.

</details>

<details>
<summary>Specialist Role and Market Stability</summary>

- The role of the specialist is to maintain continuity and avoid large price jumps, which requires balancing market orders and limit orders.
- Specialists aim to stabilize markets, meaning they should avoid exacerbating market movements by selling into falling markets.
- Price continuity is a key goal, and rules dictate how specialists adjust quotes based on price and trading volume.
- In times of large price movements, specialists are expected to reduce their price changes and maintain stability.

</details>

<details>
<summary>Differences in Global Markets</summary>

- While the NYSE uses specialists to set prices, other markets like Tokyo employ order clerks (saitori) who match orders to set prices without taking positions themselves.
- In Tokyo, large price movements may require the saitori to adjust prices to stimulate new orders or hit a price movement limit.
- Other exchanges, like London, Paris, and Mexico City, also follow rules to determine asset prices but may use different mechanisms and structures.
  
</details>

<details>
<summary>Market Microstructure Models</summary>

- Theories in market microstructure examine trading processes in terms of inventory-based models and information-based models.
- Inventory-based models focus on the market maker’s inventory position and how prices are adjusted to balance supply and demand.
- Information-based models view trading as a game where participants have asymmetric information about the true value of assets.
- These models form the theoretical foundations of market microstructure theory, which is further explored in later chapters.

</details>

# Inventory Models

<details>
<summary>Market Microstructure Theory: Early Approaches to Security Prices</summary>

- Traditional research on securities markets viewed security prices as macroeconomic phenomena.
- This perspective shifted with Demsetz's work, which highlighted bid and ask prices, focusing on the underlying microfoundations of the market.
- The microeconomic perspective helped characterize security price behavior as arising from optimizing behavior by economic agents.
</details>

<details>
<summary>Benefits of Microeconomic Perspective</summary>

- Viewing prices as determined by specific individuals or mechanisms allowed for a more detailed study of price formation.
- The microeconomic focus eliminated the need for Walrasian equilibrium approximations, which didn’t explain how equilibrium prices arise.
- This perspective allowed for predictions of how prices would change as individual traders' behavior changed.
</details>

<details>
<summary>Three Research Paradigms in Market Microstructure</summary>

- **Order Flow Approach (Garman, 1976)**: Focuses on how the flow of orders influences security trading prices.
- **Dealer Optimization Approach (Stoll and Ho, Stoll)**: Investigates the dealer’s optimization problem and how they manage pricing and market-making.
- **Multiple Liquidity Providers Approach (Cohen, Maier, Schwartz, Whitcomb)**: Analyzes the role of multiple liquidity providers in shaping market outcomes.
</details>

<details>
<summary>Uncertainty in Order Flow</summary>

- Uncertainty in order flow causes inventory problems for market makers, who must manage their inventory while facilitating trades.
- Traders face execution problems due to market conditions and the way dealers respond to changing orders.
- These issues arise from both stochastic supply and demand, which introduces uncertainty into the market-making process.
</details>

<details>
<summary>Purpose of the Chapter</summary>

- The chapter explores how market prices are set by price-setting agents in various market settings.
- It examines how market prices evolve when different types of uncertainty are introduced.
- Various market properties, such as price spreads, can be explained using inventory-based approaches.
</details>

<details>
<summary>Evolution of Market Microstructure Models</summary>

- Some early models in market microstructure were less productive and were replaced by newer, more refined approaches.
- Understanding why certain models lose viability helps improve future theoretical developments in market microstructure.
- The chapter begins by considering the role of a **risk-neutral market maker** in handling the uncertainties in order flow and pricing.
</details>

## Order Arrival and Market Making 

Got it! Here's a more detailed and accurate version with subscripts for the variables and equations:

<details>
<summary>Order Arrival and Market Making</summary>

- The equilibrium price is the price where quantity demanded equals quantity supplied.
- However, applying this model directly to securities markets is difficult due to temporal and imbalance issues in order flow.
- The key challenge is predicting how the price adjusts when buyers and sellers arrive at different times.
</details>

<details>
<summary>Garman's Contribution to Market Microstructure</summary>

- Garman (1976) argued that exchange markets are characterized by a flow of orders to buy and sell.
- He highlighted that imbalances in order flow could arise over time, introducing "temporal microstructure" as a critical focus.
- Garman emphasized that these imbalances and their resolution in market clearing mechanisms are key to understanding securities prices.
</details>

<details>
<summary>Stochastic Supply and Demand in Garman's Model</summary>

- Garman treated supply and demand as stochastic processes, highlighting the randomness in order arrivals.
- Order arrivals follow Poisson processes with stationary arrival rates, which captures the randomness of orders in a tractable manner.
- The imbalance of buy and sell orders creates a problem for market makers who must balance inventory and cash to avoid failure.
</details>

<details>
<summary>Model Assumptions and Market Maker's Problem</summary>

- The market maker is a monopolistic dealer who sets bid ($p_b$) and ask ($p_a$) prices, maximizes profit, and avoids bankruptcy.
- A major assumption is that the market maker cannot change prices midstream, a restrictive assumption in practice.
- The dealer’s problem is managing order imbalances over time without running out of inventory or cash.
</details>

<details>
<summary>Model Details and Inventory Management</summary>

- The market maker’s inventory is determined by buy ($N_a(t)$) and sell ($N_s(t)$) orders, with inventories evolving based on order arrivals.
- Inventory processes are governed by the cumulative number of shares bought and sold, and are influenced by the stochastic nature of order arrivals.
- Garman used probabilities to approximate the market maker’s position and assess the risk of bankruptcy or failure.
- The market maker’s inventory equations are given by:
  $$
  I_c(t) = I_c(0) + p_a N_a(t) - p_bN_b(t)
  $$

  $$
  I_s(t) = I_s(0) + N_b(t) - N_a(t)
  $$

  where $I_c(t)$ and $I_s(t)$ represent the inventory of cash and stock at time $t$, and $N_a(t)$ and $N_b(t)$ represent the cumulative number of shares bought and sold at time $t$.
</details>

<details>
<summary>Poisson Process and Market Maker's Position</summary>

- Garman assumes buy and sell orders follow Poisson processes with independent, exponentially distributed waiting times.
- The probability of the market maker holding a specific amount of cash or stock at a given time is derived from the Poisson process framework.
- For cash, the market maker could have $k$ units of cash at time $t$ due to the following possibilities:

  1. The market maker had $k-1$ units of cash at time $t-\Delta t$ and receives a cash inflow due to a buy order.
  2. The market maker had $k+1$ units of cash at time $t-\Delta t$ and has a cash outflow due to a sell order.
  3. The market maker had $k$ units of cash at time $t-\Delta t$ and no new orders arrive.

  The probability that the market maker has exactly $k$ units of cash at time $t$ is the sum of these probabilities:

  $$
  Q_k(t) = Q_{k-1}(t-\Delta t)[\lambda_a(p_a)p_a\Delta t][1-\lambda_b(p_b)p_b\Delta t] + Q_{k+1}(t-\Delta t)[\lambda_b(p_b)p_b\Delta t][1-\lambda_a(p_a)p_a\Delta t] + Q_k(t-\Delta t)[1-\lambda_a(p_a)p_a \Delta t][1-\lambda_b(p_b)p_b\Delta t]
  $$

  where $Q_k(t)$ is the probability that the market maker has exactly $k$ units of cash at time $t$.
</details>

<details>
<summary>Dynamics of Market Maker's Cash Position</summary>

- The market maker’s cash position evolves over time, and the key challenge is preventing it from reaching zero.
- Garman uses a differential equation to describe how cash positions change as orders arrive: by taking the limit as $\Delta \to 0$,
  $$
  \frac{\partial Q_k(t)}{\partial t} = Q_{k-1}(t)[\lambda_a(p_a)p_a]+Q_{k+1}(t)[\lambda_b(p_b)p_b] - Q_k(t)[\lambda_a(p_a)p_a+\lambda_b(p_b)p_b]
  $$
- This equation describes the dynamics of the market maker’s cash position, with the key interest being whether the market maker can avoid running out of cash and failing.
</details>

### Gambler's Ruin 

<details>
<summary>Market Maker Failure Probabilities</summary>

  - The gambler's ruin problem models a situation where a gambler starts with initial wealth and wagers until reaching a threshold or losing all wealth.
  - In the market maker context, there is no positive stopping point; the market maker's maximum gain is unbounded, and they stop only when they lose all cash or stock.
  - If the odds of winning exceed the odds of losing, the failure probability can be expressed as:
    $$
    \frac{\text{odds of losing} \times \text{amount of loss}}{\left(\text{odds of winning} \times \text{amount of gain}\right)^{\text{initial wealth}}}
    $$
  - If the odds of losing exceed the odds of winning, the probability of failure is 1.
  - The gambler's initial wealth and the relative odds of winning and losing affect the expected duration before failure. A higher initial stake or a lower odds of losing relative to winning increases the gambler's lifespan in the game.

</details>

<details>
<summary>Probability of Ruin in a Simple Gamble</summary>

  - A dealer gains a unit of stock with probability $ p $ (someone sells to the dealer) and loses a unit with probability $ q $ (someone buys from the dealer), where $ p > q $.
  - If the dealer starts with $ S_0 $ units of stock, the probability of running out of stock at time $ t $ is denoted as $ \Pr[F|S] $.
  - In the next transaction, the dealer has a $ q $ chance of losing a unit of stock (leaving $ S_1 $ units) and a $ p $ chance of gaining a unit (leaving $ S+1 $ units).
  - The probability of failure is given by the recurrence relation:
    $$
    \Pr[F|S] = q \cdot \Pr[F|S-1] + p \cdot \Pr[F|S+1]
    $$
  - Solving this difference equation, the general expected failure probability is:
    $$
    \Pr[F|S_0] = \left(\frac{q}{p}\right)^{S_0}
    $$

</details>

### Market Maker's Ruin Problem 

<details>
<summary>Market Maker's Ruin Problem</summary>

  - In continuous time, Garman shows that the approximate failure probability for running out of cash is given by:
    $$
    \lim_{t \to \infty} Q_0(t) \approx \left(\frac{\lambda_b(p_b)p_b}{\lambda_a(p_a)p_a}\right)^{I_c(0)/\overline{p}}, \text{ if } \lambda_a(p_a)p_a > \lambda_b(p_b)p_b
    $$
    and equals 1 otherwise.
  - The stock failure probability is given by:
    $$
    \lim_{t \to \infty} R_0(t) \approx \left(\frac{\lambda_a(p_a)}{\lambda_b(p_b)}\right)^{I_s(0)}, \text{ if } \lambda_a(p_a) < \lambda_b(p_b)
    $$
    and equals 1 otherwise.
  - The failure probability depends on the probabilities of stock out ($\lambda_a(p_a)$) and stock in ($\lambda_b(p_b)$), as well as the initial cash and stock holdings.
  - For the cash failure probability, bid and ask prices affect cash unequally, and the initial cash level is normalized to account for the "gamble" size.
  - The market maker must set prices so that $\lambda_a(p_a)p_a > \lambda_b(p_b)p_b$ and $\lambda_b(p_b) > \lambda_a(p_a)$ to avoid certain failure, leading to a spread between buying and selling prices.

</details>

<details>
<summary>Spread and Market Maker Pricing Strategy</summary>

  - The market maker sets a lower price when buying stock and a higher price when selling, creating a spread that protects against failure.
  - The spread is an inherent property of the exchange market structure but does not eliminate the positive probability of failure.
  - The dealer's pricing strategy should equate the order arrival rates, but there are multiple strategies that can achieve this, with the goal being profit maximization.
  - The optimal pricing strategy for the dealer results in a volume lower than what would occur with competitive prices, as seen in monopolistic pricing strategies.
  - The pricing model is similar to Demsetz's work, but Garman incorporates the intertemporal nature of the dealer's inventory problem.

</details>

<details>
<summary>Inventory and Failure Considerations</summary>

  - Pursuing a simple pricing strategy without considering inventory variability results in the dealer failing with certainty, either by running out of stock or cash.
  - Inventory follows a random walk, meaning that eventually, the dealer's stock or cash will reach the boundary (absorbing barrier), causing failure.
  - Garman's model highlights the complexity of the market-making process, demonstrating that the dealer's viability depends on inventory and cash management.
  - The analysis of dealer failure under the simplest supply and demand assumptions provides valuable insights, although the model's lack of dynamic price-setting limits its realism.
  - Garman's model suggests a frailty in the "exchange" process, with inventory determining the dealer's survival, but does not account for continuously evolving prices in actual market settings.

</details>

<details>
<summary>Amihud and Mendelson's Model</summary>

  - Amihud and Mendelson modify Garman's model by incorporating inventory into the dealer's pricing strategy, viewing the inventory as a semi-Markov process.
  - The dealer's decision variables (bid and ask prices) depend on the level of the inventory state variable, which changes over time.
  - The inventory is bounded by exogenous parameters, preventing the dealer from running out of inventory, which removes the failure probability from the model.
  - This model simplifies the dealer's pricing policies since the dealer does not face bankruptcy, and it allows for more detailed exploration of the link between inventory and prices.
  - The model concludes that the optimal bid and ask prices are monotonic functions of inventory, where the dealer lowers both prices as inventory increases and raises them as inventory decreases.

</details>

<details>
<summary>Implications and Conclusions from Amihud and Mendelson</summary>

  - The dealer's preferred inventory position plays a critical role in determining optimal prices, and the dealer adjusts prices to maintain this position.
  - As inventory departs from the preferred position, the dealer adjusts prices to bring inventory back in line with the target.
  - The model also finds that the optimal spread between bid and ask prices is positive, similar to Garman's model.
  - If competition is introduced, the spread falls to zero, making the spread primarily a transaction cost rather than a protection against failure.
  - The dealer's preferred inventory position is determined by the variability of the order arrival process, rather than the underlying asset's expected value.

</details>

<details>
<summary>Limitations and Further Research</summary>

  - The model assumes inventory plays no role in the dealer's decision problem under certain conditions, limiting its applicability to real-world scenarios where prices evolve dynamically.
  - The focus on static stochastic processes limits insights into the dealer's dynamic pricing behavior in more complex settings.
  - A more realistic approach requires emphasizing the dealer's decision problem and moving beyond the simple stochastic process approach used by Garman and Amihud-Mendelson.
  - This model provided a foundation for understanding the dynamics of price-setting and market viability, highlighting complexities that had been previously ignored.
  - Future research in market microstructure will need to address the dynamic behavior of prices and inventory, expanding the models to incorporate more realistic assumptions.

</details>

## The Dealer's Problem 

<details>
<summary>The Dealer's Problem</summary>

  - Analyzing the dealer's decision problem involves specifying objectives and constraints, particularly focusing on the risks the dealer faces and how they influence decision-making.
  - The dealer's price-setting problem is framed as choosing the optimal pricing strategy to maximize utility, with security prices arising as an outcome of the dealer’s optimizing behavior.
  - The dealer is viewed as a supplier of "immediacy" in the market, providing services similar to any intermediary, with compensation for these services reflecting the costs incurred by the dealer in facilitating transactions.
  - Stoll’s analysis shifts away from order-based models by emphasizing portfolio risk, viewing the dealer as a risk-averse market participant who alters his portfolio to accommodate other traders' desires.
  - The dealer's compensation comes through the bid and ask prices, with the spread reflecting the costs of bearing the risk associated with holding a nonoptimal portfolio.

</details>

<details>
<summary>Dealer's Costs and Utility Maximization</summary>

  - Stoll’s model considers a two-date framework, where the dealer maximizes the expected utility of terminal wealth, influenced by the initial wealth and subsequent market-making positions.
  - The dealer sets prices for a transaction, buying or selling the asset at time 1 and liquidating the position at time 2, financing inventory via borrowing at the risk-free rate $R_f$.
  - An assumption in the model is that the dealer has exogenous beliefs about the true price of the asset and its rate of return, which are invariant in the model.
  - The dealer’s terminal wealth $\tilde{W}$ after a trade is given by:  
    $$
    \tilde{W} = W_0 (1 + \tilde{R}^*) + (1 + \tilde{R}_i) Q_i - (1 + R_f)(Q_i - C_i)
    $$
  - The dealer is assumed to be willing to engage in transactions that leave his expected utility unchanged, leading to a utility maximization condition:  
    $$
    E[U(W_0(1 + \tilde{R}^*))] = E[U(\tilde{W})]
    $$

</details>

<details>
<summary>Cost Function and Inventory Implications</summary>

  - Expanding the utility condition in a Taylor series leads to the following cost equation for inventory $Q_i$:
    $$
    \frac{C_i}{Q_i} = c_i = \frac{z}{W_0} \sigma_{ip} Q_p + \frac{1}{2} \frac{z}{W_0} \sigma_i^2 Q_i
    $$
    where $z$ is the coefficient of relative risk aversion, $\sigma_{ip}$ is the correlation between the stock’s return and the optimal portfolio return, and $\sigma_i^2$ is the variance of stock $i$’s return.
  - This cost function determines the percentage dollar cost necessary for the dealer to be willing to take a position in stock $i$, reflecting wealth, risk preferences, inventory size, and the characteristics of the stock.
  - The dealer’s costs are higher for larger trades, as they move him farther from his desired inventory position. The dealer’s willingness to trade depends on how these costs balance with expected utility.

</details>

<details>
<summary>Optimal Bid and Ask Prices</summary>

  - The dealer is compensated for bearing costs through his bid and ask prices, which must cover the costs of accepting a trade. In a competitive market, bid and ask prices can be expressed as:
    $$
    \frac{P_i^* - P_b}{P_i^*} = c_i(Q_i^b)
    $$
    for the optimal bid price $P_b$, and similarly for the ask price $P_a$.
  - The resulting spread is given by:  
    $$
    (P_a - P_b) P_i^* = c_i(Q_i^b) - c_i(Q_i^a) = \left[ \frac{z}{W_0} \right] \sigma_i^2 |Q|
    $$
    where $|Q_i^a| = |Q_i^b| = |Q|$ represents the size of the transaction.
  - The spread increases linearly with trade size but does not change based on inventory, though the placement of bid and ask prices is affected by inventory size.
  - A large positive inventory leads to lower bid and ask prices, while a negative inventory causes prices to increase.

</details>

<details>
<summary>Effects of Order-Processing Costs and Trade Size</summary>

  - Stoll extends the analysis to include order-processing costs, assumed to be a fixed fee per transaction, leading to a decreasing cost function with respect to order size.
  - The total cost function combines portfolio costs, which increase with trade size, and processing costs, which decrease with trade size, resulting in a U-shaped total cost function.
  - The U-shape implies an optimal cost-minimizing trade size, or a preferred trade size, for the dealer.

</details>

<details>
<summary>Limitations of the Stoll Model and Extensions</summary>

  - The Stoll model assumes risk aversion and does not account for the possibility of risk diversification, suggesting that dealers could lower costs by diversifying their risks, a trend not observed on exchanges like the NYSE.
  - The model’s assumption of a one-period trade with stock liquidation at time 2 minimizes the intertemporal aspect of the dealer's problem, ignoring uncertainty regarding the length of inventory holding.
  - The exogeneity of the stock’s true price and return further restricts the risk the dealer faces, making his ultimate return predictable and non-random.
  - These assumptions limit the generality of the results and suggest the need for a more dynamic, intertemporal approach to the dealer’s decision-making, as addressed in later models by Ho and Stoll (1981) and O'Hara and Oldfield (1986).

</details>





